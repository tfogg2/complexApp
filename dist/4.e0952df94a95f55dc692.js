(window.webpackJsonp=window.webpackJsonp||[]).push([[4,9],{234:function(e,t,a){"use strict";a.r(t);var l=a(0),s=a.n(l),o=a(19),n=a(5),r=a.n(n),u=a(15),i=a(4),c=a(8),d=a(20),m=a(13),v=a(14),p=a(82);t.default=Object(i.g)((function(e){const t=Object(l.useContext)(m.a),a=Object(l.useContext)(v.a),n={title:{value:"",hasErrors:!1,message:""},body:{value:"",hasErrors:!1,message:""},isFetching:!0,isSaving:!1,id:Object(i.f)().id,sendCount:0,notFound:!1},[y,b]=Object(u.b)((function(e,t){switch(t.type){case"fetchComplete":return e.title.value=t.value.title,e.body.value=t.value.body,void(e.isFetching=!1);case"titleChange":return void(e.title.value=t.value);case"titleRules":return void(t.value.trim()?e.title.hasErrors=!1:(e.title.hasErrors=!0,e.title.message="You must provide a title"));case"bodyChange":return void(e.body.value=t.value);case"bodyRules":return void(t.value.trim()?e.body.hasErrors=!1:(e.body.hasErrors=!0,e.body.message="You've gotta write s-o-m-e-t-h-i-n-g!"));case"submitRequest":return void(e.title.hasErrors||e.body.hasErrors||e.sendCount++);case"saveRequestStarted":return void(e.isSaving=!0);case"saveRequestFinished":return void(e.isSaving=!1);case"notFound":return void(e.notFound=!0)}}),n);return Object(l.useEffect)(()=>{const l=r.a.CancelToken.source();return async function(){try{const s=await r.a.get("/post/"+y.id,{cancelToken:l.token});s.data?(b({type:"fetchComplete",value:s.data}),t.user.username!=s.data.author.username&&(a({type:"flashMessage",value:"You do not have permission to edit that post"}),e.history.push("/"))):b({type:"notFound"})}catch(e){console.log("There was an error.")}}(),()=>{l.cancel()}},[]),Object(l.useEffect)(()=>{if(y.sendCount){b({type:"saveRequestStarted"});const l=r.a.CancelToken.source();return async function(){try{await r.a.post(`/post/${y.id}/edit`,{title:y.title.value,body:y.body.value,token:t.user.token},{cancelToken:l.token});b({type:"saveRequestFinished"}),e.history.push("/post/"+y.id),a({type:"flashMessage",value:"Post was updated!"})}catch(e){console.log("There was an error.")}}(),()=>{l.cancel()}}},[y.sendCount]),y.notFound?s.a.createElement(p.default,null):y.isFetching?s.a.createElement(o.a,{title:"..."},s.a.createElement(d.a,null)):s.a.createElement(o.a,{title:"Edit Post"},s.a.createElement(c.b,{className:"small font-weight-bold",to:"/post/"+y.id},"Â« Back to post"),s.a.createElement("form",{className:"mt-3",onSubmit:function(e){e.preventDefault(),b({type:"titleRules",value:y.title.value}),b({type:"bodyRules",value:y.body.value}),b({type:"submitRequest"})}},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"post-title",className:"text-muted mb-1"},s.a.createElement("small",null,"Title")),s.a.createElement("input",{autoFocus:!0,onBlur:e=>b({type:"titleRules",value:e.target.value}),onChange:e=>b({type:"titleChange",value:e.target.value}),onKeyUp:e=>b({type:"titleRules",value:e.target.value}),value:y.title.value,name:"title",id:"post-title",className:"form-control form-control-lg form-control-title",type:"text",placeholder:"",autoComplete:"off"}),y.title.hasErrors&&s.a.createElement("div",{className:"alert alert-danger small liveValidateMessage"},y.title.message)),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"post-body",className:"text-muted mb-1 d-block"},s.a.createElement("small",null,"Body Content")),s.a.createElement("textarea",{onBlur:e=>b({type:"bodyRules",value:e.target.value}),onChange:e=>b({type:"bodyChange",value:e.target.value}),onKeyUp:e=>b({type:"bodyRules",value:e.target.value}),name:"body",id:"post-body",className:"body-content tall-textarea form-control",type:"text",value:y.body.value}),y.body.hasErrors&&s.a.createElement("div",{className:"alert alert-danger small liveValidateMessage"},y.body.message)),y.isSaving&&s.a.createElement("button",{className:"btn btn-primary",disabled:y.isSaving}," ","Saving..."),!y.isSaving&&s.a.createElement("button",{className:"btn btn-primary",disabled:y.isSaving},"Save Updates")))}))},82:function(e,t,a){"use strict";a.r(t);var l=a(0),s=a.n(l),o=a(19),n=a(8);t.default=function(){return s.a.createElement(o.a,{title:"Not Found"},s.a.createElement("div",{className:"text-center"},s.a.createElement("h2",null,"Whoops, we cannot find that page."),s.a.createElement("p",{className:"lead text-muted"},"You can always visit the ",s.a.createElement(n.b,{to:"/"},"Homepage")," to get a fresh start.")))}}}]);